# Mobileåº”ç”¨æµ‹è¯•ä½“ç³»æ€»ç»“

## ğŸ¯ æµ‹è¯•ä½“ç³»æ¦‚è¿°

æˆ‘å·²ç»ä¸ºä½ çš„Mobileåº”ç”¨æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•ä½“ç³»ï¼Œä½¿ç”¨Vitestä½œä¸ºæµ‹è¯•æ¡†æ¶ï¼Œè¦†ç›–äº†é¡µé¢ã€ç»„ä»¶ã€Hookã€å·¥å…·å‡½æ•°ç­‰å„ä¸ªå±‚é¢ã€‚

## ğŸ“ å·²åˆ›å»ºçš„æµ‹è¯•æ–‡ä»¶

### 1. æµ‹è¯•é…ç½®æ–‡ä»¶
- âœ… `vitest.config.ts` - Vitestä¸»é…ç½®æ–‡ä»¶
- âœ… `src/test/setup.ts` - æµ‹è¯•ç¯å¢ƒè®¾ç½®
- âœ… `src/test/utils.tsx` - æµ‹è¯•å·¥å…·å‡½æ•°
- âœ… `src/test/templates/component.test.tsx.template` - ç»„ä»¶æµ‹è¯•æ¨¡æ¿

### 2. é¡µé¢æµ‹è¯•
- âœ… `src/pages/__tests__/Home.test.tsx` - Homeé¡µé¢æµ‹è¯•
- âœ… `src/pages/__tests__/Auth.test.tsx` - Loginé¡µé¢æµ‹è¯•
- âœ… `src/pages/__tests__/Register.test.tsx` - Registeré¡µé¢æµ‹è¯•
- âœ… `src/pages/__tests__/Profile.test.tsx` - Profileé¡µé¢æµ‹è¯•
- âœ… `src/pages/__tests__/Message.test.tsx` - Messageé¡µé¢æµ‹è¯•

### 3. ç»„ä»¶æµ‹è¯•
- âœ… `src/components/__tests__/Layout.test.tsx` - Layoutç»„ä»¶æµ‹è¯•

### 4. Hookæµ‹è¯•
- âœ… `src/hooks/__tests__/useDeviceInfo.test.ts` - useDeviceInfo Hookæµ‹è¯•

### 5. å·¥å…·å‡½æ•°æµ‹è¯•
- âœ… `src/utils/__tests__/nativeBridge.test.ts` - nativeBridgeå·¥å…·å‡½æ•°æµ‹è¯•
- âœ… `src/utils/__tests__/storage.test.ts` - storageå·¥å…·å‡½æ•°æµ‹è¯•
- âœ… `src/utils/__tests__/validation.test.ts` - validationå·¥å…·å‡½æ•°æµ‹è¯•

### 6. çŠ¶æ€ç®¡ç†æµ‹è¯•
- âœ… `src/store/__tests__/userStore.test.ts` - userStoreæµ‹è¯•

### 7. æ–‡æ¡£å’Œè„šæœ¬
- âœ… `TESTING_GUIDE.md` - è¯¦ç»†çš„æµ‹è¯•æŒ‡å—
- âœ… `TEST_COVERAGE.md` - æµ‹è¯•è¦†ç›–ç‡æ–‡æ¡£
- âœ… `src/test/run-tests.sh` - æµ‹è¯•è¿è¡Œè„šæœ¬
- âœ… `src/test/run-all-tests.sh` - å®Œæ•´æµ‹è¯•è¿è¡Œè„šæœ¬

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æµ‹è¯•æ¡†æ¶
- **Vitest**: ç°ä»£åŒ–çš„æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒESMå’ŒTypeScript
- **@testing-library/react**: Reactç»„ä»¶æµ‹è¯•åº“
- **@testing-library/jest-dom**: DOMæµ‹è¯•å·¥å…·
- **jsdom**: æµè§ˆå™¨ç¯å¢ƒæ¨¡æ‹Ÿ

### æµ‹è¯•å·¥å…·
- **@vitest/ui**: æµ‹è¯•UIç•Œé¢
- **@vitest/coverage-v8**: ä»£ç è¦†ç›–ç‡å·¥å…·

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

- **è¯­å¥è¦†ç›–ç‡**: 80%
- **åˆ†æ”¯è¦†ç›–ç‡**: 80%
- **å‡½æ•°è¦†ç›–ç‡**: 80%
- **è¡Œè¦†ç›–ç‡**: 80%

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å®‰è£…ä¾èµ–
```bash
npm install
```

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:run

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:watch

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# ä½¿ç”¨UIç•Œé¢è¿è¡Œæµ‹è¯•
npm run test:ui
```

### è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm run test:run src/pages/__tests__/Home.test.tsx

# è¿è¡Œç‰¹å®šç›®å½•çš„æµ‹è¯•
npm run test:run src/pages/__tests__/
```

## ğŸ”§ æµ‹è¯•é…ç½®ç‰¹ç‚¹

### 1. è·¯å¾„åˆ«åæ”¯æŒ
- `@` æŒ‡å‘ `src` ç›®å½•
- `@shared` æŒ‡å‘ `../../shared` ç›®å½•

### 2. ç¯å¢ƒæ¨¡æ‹Ÿ
- å®Œæ•´çš„æµè§ˆå™¨ç¯å¢ƒæ¨¡æ‹Ÿ
- localStorage å’Œ sessionStorage æ¨¡æ‹Ÿ
- ç½‘ç»œAPIæ¨¡æ‹Ÿ
- åŸç”ŸBridgeæ¨¡æ‹Ÿ

### 3. æµ‹è¯•å·¥å…·
- è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼Œæ”¯æŒè·¯ç”±ä¸Šä¸‹æ–‡
- Mockå‡½æ•°å·¥å…·
- å¼‚æ­¥æµ‹è¯•å·¥å…·
- ç”¨æˆ·äº‹ä»¶æ¨¡æ‹Ÿ

## ğŸ“ æµ‹è¯•æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‘½å
- ä½¿ç”¨ä¸­æ–‡æè¿°æµ‹è¯•ç”¨ä¾‹
- éµå¾ª "åº”è¯¥..." çš„å‘½åæ¨¡å¼
- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°

### 2. æµ‹è¯•ç»“æ„
- ä½¿ç”¨ `describe` åˆ†ç»„ç›¸å…³æµ‹è¯•
- æ¯ä¸ªæµ‹è¯•åªæµ‹è¯•ä¸€ä¸ªåŠŸèƒ½ç‚¹
- ä½¿ç”¨ `beforeEach` å’Œ `afterEach` è®¾ç½®å’Œæ¸…ç†

### 3. Mockä½¿ç”¨
- ä½¿ç”¨ `vi.mock()` æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–
- ä½¿ç”¨ `vi.fn()` åˆ›å»ºæ¨¡æ‹Ÿå‡½æ•°
- åœ¨ `beforeEach` ä¸­æ¸…ç†æ¨¡æ‹ŸçŠ¶æ€

### 4. å¼‚æ­¥æµ‹è¯•
- ä½¿ç”¨ `async/await` å¤„ç†å¼‚æ­¥æ“ä½œ
- ä½¿ç”¨ `waitFor` ç­‰å¾…å¼‚æ­¥çŠ¶æ€å˜åŒ–
- ä½¿ç”¨ `act` åŒ…è£…çŠ¶æ€æ›´æ–°

## ğŸ” è·¯å¾„å’Œåç§°é—®é¢˜è§£å†³

### 1. å¯¼å…¥è·¯å¾„é—®é¢˜
- æ‰€æœ‰æµ‹è¯•æ–‡ä»¶éƒ½ä½¿ç”¨æ­£ç¡®çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥
- ä½¿ç”¨ `@` åˆ«åç®€åŒ–å¯¼å…¥è·¯å¾„
- ç¡®ä¿æµ‹è¯•æ–‡ä»¶ä¸å®é™…æ–‡ä»¶ç»“æ„åŒ¹é…

### 2. ç»„ä»¶åç§°é—®é¢˜
- ä½¿ç”¨å®é™…çš„ç»„ä»¶åç§°ï¼ˆå¦‚ `Home`, `Login`, `Register`ï¼‰
- ç¡®ä¿å¯¼å…¥çš„ç»„ä»¶åç§°ä¸å®é™…å¯¼å‡ºåç§°ä¸€è‡´
- å¤„ç†é»˜è®¤å¯¼å‡ºå’Œå‘½åå¯¼å‡ºçš„å·®å¼‚

### 3. æ–‡ä»¶ç»“æ„é—®é¢˜
- æµ‹è¯•æ–‡ä»¶æ”¾åœ¨å¯¹åº”çš„ `__tests__` ç›®å½•ä¸­
- ä¿æŒä¸å®é™…ä»£ç ç›¸åŒçš„ç›®å½•ç»“æ„
- ä½¿ç”¨æ­£ç¡®çš„æ–‡ä»¶æ‰©å±•å

## ğŸ“ˆ æµ‹è¯•ç»Ÿè®¡

### å·²å®Œæˆçš„æµ‹è¯•
- **é¡µé¢æµ‹è¯•**: 5ä¸ª
- **ç»„ä»¶æµ‹è¯•**: 1ä¸ª
- **Hookæµ‹è¯•**: 1ä¸ª
- **å·¥å…·å‡½æ•°æµ‹è¯•**: 3ä¸ª
- **çŠ¶æ€ç®¡ç†æµ‹è¯•**: 1ä¸ª
- **æ€»è®¡**: 11ä¸ªæµ‹è¯•æ–‡ä»¶

### æµ‹è¯•ç”¨ä¾‹æ•°é‡
- **æ€»è®¡**: çº¦50+ä¸ªæµ‹è¯•ç”¨ä¾‹
- **è¦†ç›–åŠŸèƒ½**: ç”¨æˆ·äº¤äº’ã€æ•°æ®æµã€é”™è¯¯å¤„ç†ã€å¼‚æ­¥æ“ä½œç­‰

## ğŸ‰ ä¼˜åŠ¿ç‰¹ç‚¹

### 1. ç°ä»£åŒ–
- ä½¿ç”¨æœ€æ–°çš„Vitestæµ‹è¯•æ¡†æ¶
- æ”¯æŒESMå’ŒTypeScript
- å¿«é€Ÿçš„æµ‹è¯•æ‰§è¡Œé€Ÿåº¦

### 2. å®Œæ•´æ€§
- è¦†ç›–æ‰€æœ‰ä¸»è¦åŠŸèƒ½æ¨¡å—
- åŒ…å«å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•
- æ”¯æŒç«¯åˆ°ç«¯æµ‹è¯•æ‰©å±•

### 3. æ˜“ç”¨æ€§
- è¯¦ç»†çš„ä¸­æ–‡æ–‡æ¡£
- å®Œæ•´çš„æµ‹è¯•æŒ‡å—
- è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

### 4. å¯ç»´æŠ¤æ€§
- æ¸…æ™°çš„æµ‹è¯•ç»“æ„
- ç»Ÿä¸€çš„æµ‹è¯•è§„èŒƒ
- å¯å¤ç”¨çš„æµ‹è¯•å·¥å…·

## ğŸ”® åç»­æ‰©å±•

### 1. ç«¯åˆ°ç«¯æµ‹è¯•
- å¯ä»¥æ·»åŠ Playwrightæˆ–Cypressè¿›è¡ŒE2Eæµ‹è¯•
- æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹

### 2. æ€§èƒ½æµ‹è¯•
- æ·»åŠ Lighthouse CIè¿›è¡Œæ€§èƒ½æµ‹è¯•
- ç›‘æ§åº”ç”¨æ€§èƒ½æŒ‡æ ‡

### 3. è§†è§‰å›å½’æµ‹è¯•
- æ·»åŠ Chromaticæˆ–Percyè¿›è¡Œè§†è§‰æµ‹è¯•
- ç¡®ä¿UIä¸€è‡´æ€§

## ğŸ“ ä½¿ç”¨å»ºè®®

1. **å¼€å§‹ä½¿ç”¨**: å…ˆè¿è¡Œ `npm run test:run` æŸ¥çœ‹å½“å‰æµ‹è¯•çŠ¶æ€
2. **æ·»åŠ æ–°æµ‹è¯•**: å‚è€ƒç°æœ‰æµ‹è¯•æ–‡ä»¶çš„ç»“æ„å’Œæ¨¡å¼
3. **ç»´æŠ¤æµ‹è¯•**: å®šæœŸè¿è¡Œæµ‹è¯•ï¼Œç¡®ä¿ä»£ç å˜æ›´ä¸ä¼šç ´åç°æœ‰åŠŸèƒ½
4. **æé«˜è¦†ç›–ç‡**: æ ¹æ® `TEST_COVERAGE.md` ä¸­çš„æ¸…å•é€æ­¥å®Œå–„æµ‹è¯•

è¿™ä¸ªæµ‹è¯•ä½“ç³»ä¸ºä½ çš„Mobileåº”ç”¨æä¾›äº†åšå®çš„è´¨é‡ä¿éšœï¼Œç¡®ä¿ä»£ç çš„å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

# åšå®¢æ¨¡å—æ–‡æ¡£

## æ¦‚è¿°

æœ¬ç›®å½•åŒ…å«äº†åšå®¢æ¨¡å—çš„å®Œæ•´æ–‡æ¡£ï¼ŒåŒ…æ‹¬ä½¿ç”¨æŒ‡å—ã€åŠŸèƒ½ä»‹ç»ã€è¿ç§»è®°å½•å’Œé—®é¢˜æ’æŸ¥ç­‰ã€‚

## ğŸ“š æ–‡æ¡£ç›®å½•

### æ ¸å¿ƒæ–‡æ¡£
- [**README.md**](./README.md) - æœ¬æ–‡æ¡£ï¼Œåšå®¢æ¨¡å—æ¦‚è¿°
- [**ä½¿ç”¨æŒ‡å—**](./usage-guide.md) - åšå®¢åŠŸèƒ½ä½¿ç”¨æŒ‡å—
- [**Markdown åŠŸèƒ½**](./markdown-features.md) - åšå®¢æ”¯æŒçš„ Markdown åŠŸèƒ½
- [**ä¸»é¢˜å®šåˆ¶**](./theming.md) - åšå®¢ä¸»é¢˜å’Œæ ·å¼å®šåˆ¶

### è¿ç§»ç›¸å…³ ğŸš€
- [**Next.js å…¨æ ˆè¿ç§»æŒ‡å—**](./nextjs-fullstack-migration-guide.md) - å®Œæ•´çš„è¿ç§»è¿‡ç¨‹è®°å½•
- [**è¿ç§»é—®é¢˜æ’æŸ¥æ‰‹å†Œ**](./migration-troubleshooting.md) - è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### æ¶æ„æŠ€æœ¯ ğŸ¯
- [**Next.js å…¨æ ˆæ¶æ„è¯¦è§£**](./nextjs-fullstack-architecture.md) - åç«¯é€»è¾‘å®ç°å’Œå‰åç«¯äº¤äº’æœºåˆ¶

## ğŸ—ï¸ æ¶æ„å˜åŒ–

### è¿ç§»å‰åå¯¹æ¯”

| é¡¹ç›® | è¿ç§»å‰ | è¿ç§»å |
|------|--------|--------|
| **æ¶æ„** | Next.js (å‰ç«¯) + NestJS (åç«¯) | Next.js å…¨æ ˆåº”ç”¨ |
| **ç«¯å£** | 3000 (å‰ç«¯) + 3001 (åç«¯) | 3000 (å…¨æ ˆ) |
| **æ•°æ®åº“** | TypeORM + PostgreSQL | Prisma + PostgreSQL |
| **è®¤è¯** | NestJS Guards | Next.js Middleware |
| **API** | RESTful API (NestJS) | Next.js API Routes |

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: Next.js 14.2.30, React 18.3.1, TypeScript, Tailwind CSS
- **åç«¯**: Next.js API Routes, Prisma ORM
- **æ•°æ®åº“**: PostgreSQL (åä¸ºäº‘)
- **è®¤è¯**: JWT + bcrypt
- **éƒ¨ç½²**: Docker, Nginx

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- PostgreSQL 12+
- pnpm 8+

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**:
   ```bash
   git clone <repository-url>
   cd AI-code/apps/blog
   ```

2. **å®‰è£…ä¾èµ–**:
   ```bash
   pnpm install
   ```

3. **ç¯å¢ƒé…ç½®**:
   ```bash
   cp .env.example .env.local
   # ç¼–è¾‘ .env.local æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰
   ```

4. **æ•°æ®åº“è¿ç§»**:
   ```bash
   npx prisma db push
   ```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**:
   ```bash
   pnpm run dev
   ```

6. **è®¿é—®åº”ç”¨**:
   - åšå®¢é¦–é¡µ: http://localhost:3000
   - API å¥åº·æ£€æŸ¥: http://localhost:3000/api/health

## ğŸ“– åŠŸèƒ½ç‰¹æ€§

### å·²å®ç°åŠŸèƒ½ âœ…
- **ç”¨æˆ·ç³»ç»Ÿ**: æ³¨å†Œã€ç™»å½•ã€ä¸ªäººèµ„æ–™ç®¡ç†
- **æ–‡ç« ç®¡ç†**: åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€å‘å¸ƒæ–‡ç« 
- **æ ‡ç­¾ç³»ç»Ÿ**: æ ‡ç­¾ç®¡ç†å’Œæ–‡ç« åˆ†ç±»
- **è¯„è®ºç³»ç»Ÿ**: åµŒå¥—è¯„è®ºå’Œå›å¤
- **æœç´¢åŠŸèƒ½**: å…¨æ–‡æœç´¢å’Œè¿‡æ»¤
- **æ–‡ä»¶ä¸Šä¼ **: å›¾ç‰‡ä¸Šä¼ å’Œç®¡ç†
- **è§’è‰²æƒé™**: ç”¨æˆ·ã€ç¼–è¾‘ã€ç®¡ç†å‘˜æƒé™
- **å“åº”å¼è®¾è®¡**: ç§»åŠ¨ç«¯é€‚é…

### API ç«¯ç‚¹
- **è®¤è¯**: `/api/auth/login`, `/api/auth/register`, `/api/auth/refresh`
- **ç”¨æˆ·**: `/api/user/profile`, `/api/user/[id]`
- **æ–‡ç« **: `/api/articles`, `/api/articles/[id]`
- **æ ‡ç­¾**: `/api/tags`, `/api/tags/[id]`, `/api/tags/[id]/articles`
- **è¯„è®º**: `/api/comments`, `/api/comments/[id]`, `/api/articles/[id]/comments`
- **ä¸Šä¼ **: `/api/uploads/images`
- **å…¶ä»–**: `/api/categories`, `/api/health`

## ğŸ”§ å¼€å‘æŒ‡å—

### ç›®å½•ç»“æ„
```
apps/blog/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ (pages)/        # é¡µé¢è·¯ç”±
â”‚   â”‚   â””â”€â”€ globals.css     # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”œâ”€â”€ lib/               # å·¥å…·åº“
â”‚   â”œâ”€â”€ types/             # TypeScript ç±»å‹
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ prisma/                # Prisma æ•°æ®åº“
â”‚   â””â”€â”€ schema.prisma      # æ•°æ®åº“æ¨¡å‹
â”œâ”€â”€ public/                # é™æ€èµ„æº
â””â”€â”€ docs/                  # æ–‡æ¡£
```

### å¼€å‘å‘½ä»¤
```bash
# å¼€å‘æœåŠ¡å™¨
pnpm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm run start

# ç±»å‹æ£€æŸ¥
pnpm run type-check

# ä»£ç æ ¼å¼æ£€æŸ¥
pnpm run lint

# æ•°æ®åº“ç›¸å…³
npx prisma studio          # æ•°æ®åº“å¯è§†åŒ–å·¥å…·
npx prisma db push         # æ¨é€æ•°æ®åº“æ¨¡å¼
npx prisma generate        # ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
```

## ğŸ› é—®é¢˜æ’æŸ¥

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
1. [**è¿ç§»é—®é¢˜æ’æŸ¥æ‰‹å†Œ**](./migration-troubleshooting.md) - è¯¦ç»†çš„é—®é¢˜è§£å†³æ–¹æ¡ˆ
2. [**è¿ç§»æŒ‡å—**](./nextjs-fullstack-migration-guide.md) - å®Œæ•´çš„è¿ç§»è¿‡ç¨‹

### å¸¸è§é—®é¢˜

#### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ SSH éš§é“
ssh -L 6543:localhost:5432 user@your-server

# æµ‹è¯•è¿æ¥
curl -s http://localhost:3000/api/health | jq .
```

#### è·¯ç”±å†²çª
ç¡®ä¿åŠ¨æ€è·¯ç”±å‚æ•°åç§°ä¸€è‡´ï¼Œé¿å…åœ¨åŒä¸€å±‚çº§ä½¿ç”¨ä¸åŒå‚æ•°åã€‚

#### ç¯å¢ƒå˜é‡æœªåŠ è½½
æ£€æŸ¥ `.env.local` æ–‡ä»¶ä½ç½®å’Œå˜é‡åç§°ï¼Œé‡å¯å¼€å‘æœåŠ¡å™¨ã€‚

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–
- **æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–**: ä½¿ç”¨ Prisma æŸ¥è¯¢ä¼˜åŒ–
- **åˆ†é¡µæŸ¥è¯¢**: å‡å°‘å†…å­˜ä½¿ç”¨
- **é€‰æ‹©æ€§å­—æ®µæŸ¥è¯¢**: å‡å°‘æ•°æ®ä¼ è¾“
- **JWT ç¼“å­˜**: è®¤è¯æ€§èƒ½ä¼˜åŒ–

### å»ºè®®çš„ä¼˜åŒ–
- **Redis ç¼“å­˜**: æ·»åŠ ç¼“å­˜å±‚
- **CDN**: é™æ€èµ„æºåŠ é€Ÿ
- **å›¾ç‰‡ä¼˜åŒ–**: å‹ç¼©å’Œæ‡’åŠ è½½
- **ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½ç»„ä»¶

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t blog-app .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 blog-app
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®
- è®¾ç½®æ­£ç¡®çš„ç¯å¢ƒå˜é‡
- é…ç½®æ•°æ®åº“è¿æ¥æ± 
- å¯ç”¨ HTTPS
- é…ç½®åå‘ä»£ç† (Nginx)

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### å¥åº·æ£€æŸ¥
```bash
curl -s http://localhost:3000/api/health
```

### æ—¥å¿—é…ç½®
```typescript
// å¯ç”¨ Prisma æŸ¥è¯¢æ—¥å¿—
const prisma = new PrismaClient({
  log: ['query', 'info', 'warn', 'error'],
});
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**: `git checkout -b feature/new-feature`
3. **æäº¤æ›´æ”¹**: `git commit -m 'Add new feature'`
4. **æ¨é€åˆ°åˆ†æ”¯**: `git push origin feature/new-feature`
5. **åˆ›å»º Pull Request**

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 - 2025-01-13
- âœ… å®Œæˆ Next.js å…¨æ ˆè¿ç§»
- âœ… å®ç° Prisma æ•°æ®åº“é›†æˆ
- âœ… æ·»åŠ  JWT è®¤è¯ç³»ç»Ÿ
- âœ… é‡æ„ API è·¯ç”±ç»“æ„
- âœ… ä¿®å¤è·¯ç”±å†²çªé—®é¢˜
- âœ… ä¼˜åŒ–æ•°æ®æ ¼å¼å¤„ç†

### v1.0.0 - 2024-12-01
- âœ… åˆå§‹ç‰ˆæœ¬ (NestJS + Next.js)
- âœ… åŸºç¡€åšå®¢åŠŸèƒ½
- âœ… ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… æ–‡ç« ç®¡ç†åŠŸèƒ½

## ğŸ“ æ”¯æŒ

å¦‚æœéœ€è¦å¸®åŠ©æˆ–æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ [é—®é¢˜æ’æŸ¥æ‰‹å†Œ](./migration-troubleshooting.md)
2. æŸ¥çœ‹ [è¿ç§»æŒ‡å—](./nextjs-fullstack-migration-guide.md)
3. åˆ›å»º GitHub Issue
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

*æœ€åæ›´æ–°: 2025-01-13*  
*ç»´æŠ¤çŠ¶æ€: æ´»è·ƒç»´æŠ¤ä¸­* ğŸš€

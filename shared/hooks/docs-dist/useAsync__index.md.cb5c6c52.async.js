"use strict";(self.webpackChunk_corn12138_hooks=self.webpackChunk_corn12138_hooks||[]).push([[405],{45246:function(l,n,s){s.r(n);var c=s(63978),i=s(14023),o=s(3813),h=s(42469),I=s(19341),t=s(9805),r=s(97722),v=s(27804),a=s(46510),u=s(81576),x=s(44194),d=s(10156),e=s(31549);function _(){return(0,e.jsx)(a.dY,{children:(0,e.jsx)(x.Suspense,{fallback:(0,e.jsx)(u.Z,{}),children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"useasync",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#useasync",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"useAsync"]}),(0,e.jsx)("p",{children:d.texts[0].value}),(0,e.jsxs)("h2",{id:"\u57FA\u672C\u7528\u6CD5",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u57FA\u672C\u7528\u6CD5",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u57FA\u672C\u7528\u6CD5"]})]}),(0,e.jsx)(a.Dl,{demo:{id:"src-use-async-demo-0"},previewerProps:{}}),(0,e.jsx)("div",{className:"markdown",children:(0,e.jsxs)("h2",{id:"\u9AD8\u7EA7\u7528\u6CD5",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u9AD8\u7EA7\u7528\u6CD5",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u9AD8\u7EA7\u7528\u6CD5"]})}),(0,e.jsx)(a.Dl,{demo:{id:"src-use-async-demo-1"},previewerProps:{}}),(0,e.jsx)("div",{className:"markdown",children:(0,e.jsxs)("h2",{id:"\u4E0E\u5176\u4ED6-hook-\u7ED3\u5408",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4E0E\u5176\u4ED6-hook-\u7ED3\u5408",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u4E0E\u5176\u4ED6 Hook \u7ED3\u5408"]})}),(0,e.jsx)(a.Dl,{demo:{id:"src-use-async-demo-2"},previewerProps:{}}),(0,e.jsx)("div",{className:"markdown",children:(0,e.jsxs)("h2",{id:"\u5B9E\u9645\u5E94\u7528\u793A\u4F8B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5B9E\u9645\u5E94\u7528\u793A\u4F8B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u5B9E\u9645\u5E94\u7528\u793A\u4F8B"]})}),(0,e.jsx)(a.Dl,{demo:{id:"src-use-async-demo-3"},previewerProps:{}}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"api",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#api",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"API"]}),(0,e.jsxs)("h3",{id:"\u53C2\u6570",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u53C2\u6570",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u53C2\u6570"]}),(0,e.jsxs)(r.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:d.texts[1].value}),(0,e.jsx)("th",{children:d.texts[2].value}),(0,e.jsx)("th",{children:d.texts[3].value}),(0,e.jsx)("th",{children:d.texts[4].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[5].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[6].value})}),(0,e.jsx)("td",{children:d.texts[7].value}),(0,e.jsx)("td",{children:d.texts[8].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[9].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[10].value})}),(0,e.jsx)("td",{children:d.texts[11].value}),(0,e.jsx)("td",{children:d.texts[12].value})]})]})]}),(0,e.jsxs)("h3",{id:"useasyncoptions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#useasyncoptions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"UseAsyncOptions"]}),(0,e.jsxs)(r.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:d.texts[13].value}),(0,e.jsx)("th",{children:d.texts[14].value}),(0,e.jsx)("th",{children:d.texts[15].value}),(0,e.jsx)("th",{children:d.texts[16].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[17].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[18].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[19].value})}),(0,e.jsx)("td",{children:d.texts[20].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[21].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[22].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[23].value})}),(0,e.jsx)("td",{children:d.texts[24].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[25].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[26].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[27].value})}),(0,e.jsx)("td",{children:d.texts[28].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[29].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[30].value})}),(0,e.jsx)("td",{children:d.texts[31].value}),(0,e.jsx)("td",{children:d.texts[32].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[33].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[34].value})}),(0,e.jsx)("td",{children:d.texts[35].value}),(0,e.jsx)("td",{children:d.texts[36].value})]})]})]}),(0,e.jsxs)("h3",{id:"\u8FD4\u56DE\u503C",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u8FD4\u56DE\u503C",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u8FD4\u56DE\u503C"]}),(0,e.jsxs)(r.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:d.texts[37].value}),(0,e.jsx)("th",{children:d.texts[38].value}),(0,e.jsx)("th",{children:d.texts[39].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[40].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[41].value})}),(0,e.jsx)("td",{children:d.texts[42].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[43].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[44].value})}),(0,e.jsx)("td",{children:d.texts[45].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[46].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[47].value})}),(0,e.jsx)("td",{children:d.texts[48].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[49].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[50].value})}),(0,e.jsx)("td",{children:d.texts[51].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[52].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[53].value})}),(0,e.jsx)("td",{children:d.texts[54].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[55].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[56].value})}),(0,e.jsx)("td",{children:d.texts[57].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:d.texts[58].value}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:d.texts[59].value})}),(0,e.jsx)("td",{children:d.texts[60].value})]})]})]}),(0,e.jsxs)("h2",{id:"\u6700\u4F73\u5B9E\u8DF5",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u6700\u4F73\u5B9E\u8DF5",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u6700\u4F73\u5B9E\u8DF5"]}),(0,e.jsxs)("h3",{id:"1-\u9519\u8BEF\u5904\u7406",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1-\u9519\u8BEF\u5904\u7406",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1. \u9519\u8BEF\u5904\u7406"]}),(0,e.jsx)(t.Z,{lang:"javascript",children:d.texts[61].value}),(0,e.jsxs)("h3",{id:"2-\u9632\u6B62\u5185\u5B58\u6CC4\u6F0F",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2-\u9632\u6B62\u5185\u5B58\u6CC4\u6F0F",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2. \u9632\u6B62\u5185\u5B58\u6CC4\u6F0F"]}),(0,e.jsx)(t.Z,{lang:"javascript",children:d.texts[62].value}),(0,e.jsxs)("h3",{id:"3-\u6761\u4EF6\u6267\u884C",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#3-\u6761\u4EF6\u6267\u884C",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3. \u6761\u4EF6\u6267\u884C"]}),(0,e.jsx)(t.Z,{lang:"javascript",children:d.texts[63].value}),(0,e.jsxs)("h2",{id:"\u6CE8\u610F\u4E8B\u9879",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u6CE8\u610F\u4E8B\u9879",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u6CE8\u610F\u4E8B\u9879"]}),(0,e.jsxs)("ol",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:d.texts[64].value}),d.texts[65].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:d.texts[66].value}),d.texts[67].value,(0,e.jsx)("code",{children:d.texts[68].value}),d.texts[69].value,(0,e.jsx)("code",{children:d.texts[70].value}),d.texts[71].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:d.texts[72].value}),d.texts[73].value,(0,e.jsx)("code",{children:d.texts[74].value}),d.texts[75].value,(0,e.jsx)("code",{children:d.texts[76].value}),d.texts[77].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:d.texts[78].value}),d.texts[79].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:d.texts[80].value}),d.texts[81].value,(0,e.jsx)("code",{children:d.texts[82].value}),d.texts[83].value]})]})]})]})})})}n.default=_},10156:function(l,n,s){s.r(n),s.d(n,{texts:function(){return c}});const c=[{value:"\u7528\u4E8E\u5904\u7406\u5F02\u6B65\u64CD\u4F5C\u7684 React Hook\u3002",paraId:0,tocIndex:0},{value:"\u53C2\u6570",paraId:1,tocIndex:6},{value:"\u7C7B\u578B",paraId:1,tocIndex:6},{value:"\u5FC5\u586B",paraId:1,tocIndex:6},{value:"\u63CF\u8FF0",paraId:1,tocIndex:6},{value:"asyncFunction",paraId:1,tocIndex:6},{value:"(...args: any[]) => Promise<T>",paraId:1,tocIndex:6},{value:"\u2705",paraId:1,tocIndex:6},{value:"\u5F02\u6B65\u51FD\u6570",paraId:1,tocIndex:6},{value:"options",paraId:1,tocIndex:6},{value:"UseAsyncOptions",paraId:1,tocIndex:6},{value:"\u274C",paraId:1,tocIndex:6},{value:"\u914D\u7F6E\u9009\u9879",paraId:1,tocIndex:6},{value:"\u5C5E\u6027",paraId:2,tocIndex:7},{value:"\u7C7B\u578B",paraId:2,tocIndex:7},{value:"\u9ED8\u8BA4\u503C",paraId:2,tocIndex:7},{value:"\u63CF\u8FF0",paraId:2,tocIndex:7},{value:"immediate",paraId:2,tocIndex:7},{value:"boolean",paraId:2,tocIndex:7},{value:"false",paraId:2,tocIndex:7},{value:"\u662F\u5426\u7ACB\u5373\u6267\u884C",paraId:2,tocIndex:7},{value:"retryCount",paraId:2,tocIndex:7},{value:"number",paraId:2,tocIndex:7},{value:"0",paraId:2,tocIndex:7},{value:"\u91CD\u8BD5\u6B21\u6570",paraId:2,tocIndex:7},{value:"retryDelay",paraId:2,tocIndex:7},{value:"number",paraId:2,tocIndex:7},{value:"1000",paraId:2,tocIndex:7},{value:"\u91CD\u8BD5\u5EF6\u8FDF\uFF08\u6BEB\u79D2\uFF09",paraId:2,tocIndex:7},{value:"onSuccess",paraId:2,tocIndex:7},{value:"(data: T) => void",paraId:2,tocIndex:7},{value:"-",paraId:2,tocIndex:7},{value:"\u6210\u529F\u56DE\u8C03",paraId:2,tocIndex:7},{value:"onError",paraId:2,tocIndex:7},{value:"(error: Error) => void",paraId:2,tocIndex:7},{value:"-",paraId:2,tocIndex:7},{value:"\u9519\u8BEF\u56DE\u8C03",paraId:2,tocIndex:7},{value:"\u5C5E\u6027",paraId:3,tocIndex:8},{value:"\u7C7B\u578B",paraId:3,tocIndex:8},{value:"\u63CF\u8FF0",paraId:3,tocIndex:8},{value:"data",paraId:3,tocIndex:8},{value:"T | null",paraId:3,tocIndex:8},{value:"\u5F02\u6B65\u64CD\u4F5C\u8FD4\u56DE\u7684\u6570\u636E",paraId:3,tocIndex:8},{value:"loading",paraId:3,tocIndex:8},{value:"boolean",paraId:3,tocIndex:8},{value:"\u662F\u5426\u6B63\u5728\u52A0\u8F7D",paraId:3,tocIndex:8},{value:"error",paraId:3,tocIndex:8},{value:"string | null",paraId:3,tocIndex:8},{value:"\u9519\u8BEF\u4FE1\u606F",paraId:3,tocIndex:8},{value:"execute",paraId:3,tocIndex:8},{value:"(...args: any[]) => Promise<void>",paraId:3,tocIndex:8},{value:"\u6267\u884C\u5F02\u6B65\u51FD\u6570",paraId:3,tocIndex:8},{value:"reset",paraId:3,tocIndex:8},{value:"() => void",paraId:3,tocIndex:8},{value:"\u91CD\u7F6E\u6240\u6709\u72B6\u6001",paraId:3,tocIndex:8},{value:"cancel",paraId:3,tocIndex:8},{value:"() => void",paraId:3,tocIndex:8},{value:"\u53D6\u6D88\u5F53\u524D\u64CD\u4F5C",paraId:3,tocIndex:8},{value:"retry",paraId:3,tocIndex:8},{value:"() => void",paraId:3,tocIndex:8},{value:"\u4F7F\u7528\u4E0A\u6B21\u53C2\u6570\u91CD\u8BD5",paraId:3,tocIndex:8},{value:`const { data, error, execute } = useAsync(
  async (userId) => {
    const response = await fetch(\`/api/users/\${userId}\`);
    if (!response.ok) {
      // \u629B\u51FA\u5177\u4F53\u7684\u9519\u8BEF\u4FE1\u606F
      throw new Error(\`HTTP \${response.status}: \${response.statusText}\`);
    }
    return response.json();
  },
  {
    onError: (error) => {
      // \u7EDF\u4E00\u9519\u8BEF\u5904\u7406
      if (error.message.includes('404')) {
        console.error('\u7528\u6237\u4E0D\u5B58\u5728');
      } else {
        console.error('\u52A0\u8F7D\u7528\u6237\u5931\u8D25:', error.message);
      }
    }
  }
);
`,paraId:4,tocIndex:10},{value:`function Component() {
  const { execute } = useAsync(
    async () => {
      // \u957F\u65F6\u95F4\u8FD0\u884C\u7684\u5F02\u6B65\u64CD\u4F5C
      const response = await fetch('/api/heavy-operation');
      return response.json();
    }
  );

  useEffect(() => {
    execute();
    
    // \u7EC4\u4EF6\u5378\u8F7D\u65F6\u4F1A\u81EA\u52A8\u53D6\u6D88\u8BF7\u6C42\uFF0C\u65E0\u9700\u624B\u52A8\u5904\u7406
  }, [execute]);

  return <div>Component</div>;
}
`,paraId:5,tocIndex:11},{value:`function UserPosts({ userId }) {
  const { data: posts, loading, execute } = useAsync(
    async (id) => {
      const response = await fetch(\`/api/users/\${id}/posts\`);
      return response.json();
    }
  );

  useEffect(() => {
    // \u53EA\u5728\u6709 userId \u65F6\u624D\u6267\u884C
    if (userId) {
      execute(userId);
    }
  }, [userId, execute]);

  if (!userId) return <div>\u8BF7\u9009\u62E9\u7528\u6237</div>;
  if (loading) return <div>\u52A0\u8F7D\u4E2D...</div>;
  
  return (
    <div>
      {posts?.map(post => (
        <div key={post.id}>{post.title}</div>
      ))}
    </div>
  );
}
`,paraId:6,tocIndex:12},{value:"\u7EC4\u4EF6\u5378\u8F7D\u65F6\u81EA\u52A8\u6E05\u7406",paraId:7,tocIndex:13},{value:"\uFF1AHook \u4F1A\u5728\u7EC4\u4EF6\u5378\u8F7D\u65F6\u81EA\u52A8\u53D6\u6D88\u6B63\u5728\u8FDB\u884C\u7684\u8BF7\u6C42",paraId:7,tocIndex:13},{value:"\u91CD\u8BD5\u673A\u5236",paraId:7,tocIndex:13},{value:"\uFF1A\u5931\u8D25\u65F6\u4F1A\u6839\u636E ",paraId:7,tocIndex:13},{value:"retryCount",paraId:7,tocIndex:13},{value:" \u81EA\u52A8\u91CD\u8BD5\uFF0C\u6BCF\u6B21\u91CD\u8BD5\u95F4\u9694 ",paraId:7,tocIndex:13},{value:"retryDelay",paraId:7,tocIndex:13},{value:" \u6BEB\u79D2",paraId:7,tocIndex:13},{value:"\u53C2\u6570\u7F13\u5B58",paraId:7,tocIndex:13},{value:"\uFF1A",paraId:7,tocIndex:13},{value:"retry()",paraId:7,tocIndex:13},{value:" \u65B9\u6CD5\u4F1A\u4F7F\u7528\u4E0A\u6B21 ",paraId:7,tocIndex:13},{value:"execute()",paraId:7,tocIndex:13},{value:" \u7684\u53C2\u6570",paraId:7,tocIndex:13},{value:"\u9519\u8BEF\u7C7B\u578B",paraId:7,tocIndex:13},{value:"\uFF1A\u9519\u8BEF\u4FE1\u606F\u7EDF\u4E00\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B",paraId:7,tocIndex:13},{value:"\u5E76\u53D1\u63A7\u5236",paraId:7,tocIndex:13},{value:"\uFF1A\u65B0\u7684 ",paraId:7,tocIndex:13},{value:"execute()",paraId:7,tocIndex:13},{value:" \u8C03\u7528\u4F1A\u53D6\u6D88\u4E4B\u524D\u7684\u8BF7\u6C42",paraId:7,tocIndex:13}]}}]);
